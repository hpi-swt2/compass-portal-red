class IndoorController < ApplicationController
  def demo
    @building = Building.new(rooms: [Room.new(
      outer_shape: Polyline.new(points: [
                                  Point.new(x: 30, y: 80),
                                  Point.new(x: 30, y: 30),
                                  Point.new(x: 80, y: 30),
                                  Point.new(x: 80, y: 80),
                                  Point.new(x: 30, y: 80)
                                ]),
      point_of_interests: [PointOfInterest.new(point: Point.new(x: 20, y: 50))],
      walls: [ Wall.new(polyline: Polyline.new(points: [
                                                 Point.new(x: 30, y: 30),
                                                 Point.new(x: 80, y: 80)
                                               ])) ]
    )])
  end

  def geojson 
    render json: {
      "type": "FeatureCollection",
      "name": "tracks",
      "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
      "features": [
      { "type": "Feature", "properties": { "name": "HS 3" }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ 13.131974972449999, 52.394245291049998 ], [ 13.132165744570001, 52.394255111550002 ], [ 13.132168091500001, 52.394239357830003 ], [ 13.13216373291, 52.394238948640002 ], [ 13.1321821731, 52.394107190020001 ], [ 13.132140598859435, 52.394105450973903 ], [ 13.132140431217495, 52.394108724483949 ], [ 13.132140284539737, 52.394108740636504 ], [ 13.132051922451973, 52.394105108071571 ], [ 13.131993077360001, 52.394102688949999 ], [ 13.131974972449999, 52.394245291049998 ] ] ] } },
      { "type": "Feature", "properties": { "name": "Passage" }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ 13.132165744570001, 52.394255111550002 ], [ 13.132164403459999, 52.394265750419997 ], [ 13.132195919420001, 52.394267591759998 ], [ 13.13219726052, 52.394256952889997 ], [ 13.13220027801, 52.394240994580002 ], [ 13.132219053469999, 52.39410903137 ], [ 13.132187537509999, 52.394107599210002 ], [ 13.132168091500001, 52.394239357830003 ], [ 13.132165744570001, 52.394255111550002 ] ] ] } },
      { "type": "Feature", "properties": { "name": "HS 2" }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ 13.13219726052, 52.394256952889997 ], [ 13.132395743989999, 52.394266977980003 ], [ 13.13241451945, 52.394140334310002 ], [ 13.13242491301, 52.394140743500003 ], [ 13.13242725994, 52.394127854060002 ], [ 13.13241686638, 52.394127444870001 ], [ 13.13241820749, 52.394120693250002 ], [ 13.13225358691, 52.394114146230002 ], [ 13.132253922189999, 52.39411128191 ], [ 13.132224417890001, 52.394109440560001 ], [ 13.132204971869999, 52.394241199169997 ], [ 13.13220027801, 52.394240994580002 ], [ 13.13219726052, 52.394256952889997 ] ] ] } },
      { "type": "Feature", "properties": { "name": "Foyer" }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ 13.13242491301, 52.394140743500003 ], [ 13.132422230802476, 52.394163453455548 ], [ 13.132507390938697, 52.394167340744531 ], [ 13.132536895237862, 52.3939860699573 ], [ 13.132123164497317, 52.393972975876117 ], [ 13.132119811736047, 52.394002642148237 ], [ 13.132154009900987, 52.394003869717686 ], [ 13.132149133270739, 52.394040695928865 ], [ 13.13214318143126, 52.394085641615398 ], [ 13.132140598855912, 52.394105144079766 ], [ 13.132140598859435, 52.394105450973903 ], [ 13.1321821731, 52.394107190020001 ], [ 13.132187537509999, 52.394107599210002 ], [ 13.132219053469999, 52.39410903137 ], [ 13.132224417890001, 52.394109440560001 ], [ 13.132253922189999, 52.39411128191 ], [ 13.132429271601138, 52.394118851904857 ], [ 13.13242725994, 52.394127854060002 ], [ 13.13242491301, 52.394140743500003 ] ] ] } },
      { "type": "Feature", "properties": { "name": "R1" }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ 13.132051922451973, 52.394105108071571 ], [ 13.132054768335074, 52.394081820205592 ], [ 13.13214318143126, 52.394085641615398 ], [ 13.132140284539737, 52.394108740636504 ], [ 13.132051922451973, 52.394105108071571 ] ] ] } },
      { "type": "Feature", "properties": { "name": "R2" }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ 13.132054768335074, 52.394081820205592 ], [ 13.132060803305361, 52.394037423167148 ], [ 13.132149133270739, 52.394040695928865 ], [ 13.13214318143126, 52.394085641615398 ], [ 13.132054768335074, 52.394081820205592 ] ] ] } },
      { "type": "Feature", "properties": { "name": "R3" }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ 13.132060803305361, 52.394037423167148 ], [ 13.132064826618882, 52.394001005286611 ], [ 13.132154009900987, 52.394003869717686 ], [ 13.132149133270739, 52.394040695928865 ], [ 13.132060803305361, 52.394037423167148 ] ] ] } },
      { "type": "Feature", "properties": { "name": "HS Building" }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ 13.131974972449999, 52.394245291049998 ], [ 13.131993077360001, 52.394102688949999 ], [ 13.132051922451973, 52.394105108071571 ], [ 13.132064826618882, 52.394001005286611 ], [ 13.132119811736047, 52.394002642148237 ], [ 13.132123164497317, 52.393972975876117 ], [ 13.132536895237862, 52.3939860699573 ], [ 13.132507390938697, 52.394167340744531 ], [ 13.132422230802476, 52.394163453455548 ], [ 13.13242491301, 52.394140743500003 ], [ 13.13241451945, 52.394140334310002 ], [ 13.132395743989999, 52.394266977980003 ], [ 13.13219726052, 52.394256952889997 ], [ 13.132195919420001, 52.394267591759998 ], [ 13.132164403459999, 52.394265750419997 ], [ 13.132165744570001, 52.394255111550002 ], [ 13.131974972449999, 52.394245291049998 ] ] ] } }
      ]
    } 
  end
end
